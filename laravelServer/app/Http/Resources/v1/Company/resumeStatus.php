<?phpnamespace App\Http\Resources\v1\Company;use App\Models\Advertising;use App\Models\AdvertizingResume;use App\Models\Money;use Hekmatinasser\Verta\Verta;use Illuminate\Http\Resources\Json\JsonResource;use App\Http\Resources\v1\Possibilities\Money as moneyResource ;use App\Http\Resources\v1\Company\ResmeStatusListCollection;use App\Models\resumeStatusList;use App\Models\BaseResume;class resumeStatus extends JsonResource{    /**     * Transform the resource into an array.     *     * @param  \Illuminate\Http\Request  $request     * @return array     */    public function toArray($request)    {        $money = Money::find($this->money);        //$ad = Advertising::find($this->advertising);        $adresume = resumeStatusList::where('base_resume' , $this->base_resume)->where('advertising' , $this->advertising)->get();        return [            'id'      =>    $this->id ,            'base_resume'   => $this->base_resume ,            'advertising'   => $this->advertising ,            'status'         => $this->status ,            'file'           => $this->file ,            'money'          => new moneyResource($money)  ,            'statusLists'    => new ResmeStatusListCollection($adresume),            'rank'           => $this->getResumePercent($this->base_resume)         ];    }            public  function getResumePercent($base) {        $resume = BaseResume::find($base);        $rank = 20 ;        if($resume->image)            $rank += 5 ;        if($resume->image)            $rank += 15 ;        if($resume->recordStudies->count() != 0)            $rank += 5 ;        if($resume->recordStudies->count() > 1)            $rank += 5 ;        if($resume->recordjobs->count() != 0)            $rank += 10 ;        if($resume->recordjobs->count() > 1)            $rank += 10 ;        if ( $resume->languages->count() != 0)            $rank += 10 ;        if ( $resume->articles->count() != 0)            $rank += 5 ;        if ( $resume->projects->count() != 0)            $rank += 5 ;        if ( $resume->honors->count() != 0)            $rank += 5 ;        if ( $resume->certificates->count() != 0)            $rank += 5 ;        return $rank ;    }}